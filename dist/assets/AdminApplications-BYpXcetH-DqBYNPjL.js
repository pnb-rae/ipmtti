import{N as q,U as l,P as w,K as e,R as B,E as K,l as A,S as V,V as _,W as C,_ as R,a0 as S,a1 as c,e as M,a2 as p,a3 as z,a4 as W,a5 as Y,a6 as $,a7 as O,a8 as m,p as X}from"./index-B2NPUppa.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=A("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),k=l.forwardRef(({className:t,...d},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:m("w-full caption-bottom text-sm",t),...d})}));k.displayName="Table";const E=l.forwardRef(({className:t,...d},r)=>e.jsx("thead",{ref:r,className:m("[&_tr]:border-b",t),...d}));E.displayName="TableHeader";const T=l.forwardRef(({className:t,...d},r)=>e.jsx("tbody",{ref:r,className:m("[&_tr:last-child]:border-0",t),...d}));T.displayName="TableBody";const Q=l.forwardRef(({className:t,...d},r)=>e.jsx("tfoot",{ref:r,className:m("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...d}));Q.displayName="TableFooter";const u=l.forwardRef(({className:t,...d},r)=>e.jsx("tr",{ref:r,className:m("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...d}));u.displayName="TableRow";const o=l.forwardRef(({className:t,...d},r)=>e.jsx("th",{ref:r,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...d}));o.displayName="TableHead";const n=l.forwardRef(({className:t,...d},r)=>e.jsx("td",{ref:r,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...d}));n.displayName="TableCell";const ee=l.forwardRef(({className:t,...d},r)=>e.jsx("caption",{ref:r,className:m("mt-4 text-sm text-muted-foreground",t),...d}));ee.displayName="TableCaption";const ae=()=>{const{toast:t}=q(),[d,r]=l.useState([]),[f,D]=l.useState([]),[P,g]=l.useState(!0),[x,I]=l.useState(""),[h,U]=l.useState("all"),[a,N]=l.useState(null),[L,b]=l.useState(!1);l.useEffect(()=>{j()},[]),l.useEffect(()=>{F()},[x,h,d]);const j=async()=>{try{g(!0);const{data:s,error:i}=await w.from("applications").select("*").order("created_at",{ascending:!1});if(i)throw i;r(s||[])}catch(s){console.error("Error fetching applications:",s),t({title:"Error",description:"Failed to load applications",variant:"destructive"})}finally{g(!1)}},F=()=>{let s=d;h!=="all"&&(s=s.filter(i=>i.status===h)),x&&(s=s.filter(i=>i.full_name.toLowerCase().includes(x.toLowerCase())||i.email_address.toLowerCase().includes(x.toLowerCase())||i.course.toLowerCase().includes(x.toLowerCase())||i.mobile_number.includes(x))),D(s)},G=async(s,i)=>{try{const{error:y}=await w.from("applications").update({status:i}).eq("id",s);if(y)throw y;t({title:"Status Updated",description:`Application status changed to ${i}`}),j()}catch{t({title:"Error",description:"Failed to update status",variant:"destructive"})}},v=s=>{const i={pending:"bg-yellow-100 text-yellow-800",under_review:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return e.jsx(X,{className:i[s]||i.pending,children:s.replace("_"," ").toUpperCase()})},H=s=>{N(s),b(!0)};return P?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background py-12",children:[e.jsx(K,{title:"Admin Applications",robots:"noindex, nofollow",canonical:"/admin/applications"}),e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-2",children:"Applications Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and review student applications"})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(V,{placeholder:"Search by name, email, course...",value:x,onChange:s=>I(s.target.value),className:"pl-10"})]}),e.jsxs(_,{value:h,onValueChange:U,children:[e.jsx(C,{children:e.jsx(R,{placeholder:"Filter by status"})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:"All Statuses"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"under_review",children:"Under Review"}),e.jsx(c,{value:"accepted",children:"Accepted"}),e.jsx(c,{value:"rejected",children:"Rejected"})]})]}),e.jsx(M,{onClick:j,variant:"outline",children:"Refresh"})]})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:d.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Applications"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:d.filter(s=>s.status==="pending").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.filter(s=>s.status==="under_review").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Under Review"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(s=>s.status==="accepted").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Accepted"})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:e.jsxs(k,{children:[e.jsx(E,{children:e.jsxs(u,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Email"}),e.jsx(o,{children:"Phone"}),e.jsx(o,{children:"Course"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Date"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(T,{children:f.length===0?e.jsx(u,{children:e.jsx(n,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No applications found"})}):f.map(s=>e.jsxs(u,{children:[e.jsx(n,{className:"font-medium",children:s.full_name}),e.jsx(n,{className:"text-sm",children:s.email_address}),e.jsx(n,{className:"text-sm",children:s.mobile_number}),e.jsx(n,{className:"text-sm",children:s.course}),e.jsx(n,{children:s.student_type}),e.jsx(n,{children:v(s.status)}),e.jsx(n,{className:"text-sm",children:p(new Date(s.created_at),"MMM dd, yyyy")}),e.jsx(n,{children:e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>H(s),children:e.jsx(Z,{className:"w-4 h-4"})})})]},s.id))})]})})]}),a&&e.jsx(z,{open:L,onOpenChange:b,children:e.jsxs(W,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Y,{children:[e.jsx($,{children:"Application Details"}),e.jsx(O,{children:"Review and manage this application"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Current Status"}),v(a.status)]}),e.jsxs(_,{value:a.status,onValueChange:s=>{G(a.id,s),N({...a,status:s})},children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(R,{})}),e.jsxs(S,{children:[e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"under_review",children:"Under Review"}),e.jsx(c,{value:"accepted",children:"Accepted"}),e.jsx(c,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"}),e.jsx("p",{className:"font-medium",children:a.full_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Number:"}),e.jsx("p",{className:"font-medium",children:a.id_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date of Birth:"}),e.jsx("p",{className:"font-medium",children:p(new Date(a.date_of_birth),"MMMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"}),e.jsx("p",{className:"font-medium",children:a.gender})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"}),e.jsx("p",{className:"font-medium",children:a.email_address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),e.jsx("p",{className:"font-medium",children:a.mobile_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"County:"}),e.jsx("p",{className:"font-medium",children:a.county})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Course Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Course:"}),e.jsx("p",{className:"font-medium",children:a.course})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Student Type:"}),e.jsx("p",{className:"font-medium",children:a.student_type})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Guardian Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guardian Name:"}),e.jsx("p",{className:"font-medium",children:a.guardian_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guardian Contact:"}),e.jsx("p",{className:"font-medium",children:a.guardian_contact})]})]})]}),(a.allergies||a.pre_existing_conditions)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Medical Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.allergies&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Allergies:"}),e.jsx("p",{className:"font-medium",children:a.allergies})]}),a.pre_existing_conditions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pre-existing Conditions:"}),e.jsx("p",{className:"font-medium",children:a.pre_existing_conditions})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Application ID: ",a.id]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Submitted: ",p(new Date(a.created_at),"MMMM dd, yyyy 'at' hh:mm a")]})]})]})]})})]})};export{ae as default};
