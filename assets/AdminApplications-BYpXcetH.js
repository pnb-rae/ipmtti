import{j as e}from"./vendor-B-0fo-cE.js";import{r as l}from"./react-DJRKAz3G.js";import{i as D,t as m,u as O,v as w,L as U,s as q,I as z,w as _,x as C,y as S,z as A,D as c,f as T,E as g,G as V,J as Q,K as J,N as K,O as $,B as W}from"./index-BUEHb4YN.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=D("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=D("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),R=l.forwardRef(({className:r,...a},d)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:d,className:m("w-full caption-bottom text-sm",r),...a})}));R.displayName="Table";const M=l.forwardRef(({className:r,...a},d)=>e.jsx("thead",{ref:d,className:m("[&_tr]:border-b",r),...a}));M.displayName="TableHeader";const E=l.forwardRef(({className:r,...a},d)=>e.jsx("tbody",{ref:d,className:m("[&_tr:last-child]:border-0",r),...a}));E.displayName="TableBody";const Z=l.forwardRef(({className:r,...a},d)=>e.jsx("tfoot",{ref:d,className:m("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a}));Z.displayName="TableFooter";const h=l.forwardRef(({className:r,...a},d)=>e.jsx("tr",{ref:d,className:m("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",r),...a}));h.displayName="TableRow";const o=l.forwardRef(({className:r,...a},d)=>e.jsx("th",{ref:d,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a}));o.displayName="TableHead";const n=l.forwardRef(({className:r,...a},d)=>e.jsx("td",{ref:d,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a}));n.displayName="TableCell";const ee=l.forwardRef(({className:r,...a},d)=>e.jsx("caption",{ref:d,className:m("mt-4 text-sm text-muted-foreground",r),...a}));ee.displayName="TableCaption";const re=()=>{const{toast:r}=O(),[a,d]=l.useState([]),[f,I]=l.useState([]),[L,b]=l.useState(!0),[x,k]=l.useState(""),[u,F]=l.useState("all"),[t,N]=l.useState(null),[B,v]=l.useState(!1);l.useEffect(()=>{j()},[]),l.useEffect(()=>{P()},[x,u,a]);const j=async()=>{try{b(!0);const{data:s,error:i}=await w.from("applications").select("*").order("created_at",{ascending:!1});if(i)throw i;d(s||[])}catch(s){console.error("Error fetching applications:",s),r({title:"Error",description:"Failed to load applications",variant:"destructive"})}finally{b(!1)}},P=()=>{let s=a;u!=="all"&&(s=s.filter(i=>i.status===u)),x&&(s=s.filter(i=>i.full_name.toLowerCase().includes(x.toLowerCase())||i.email_address.toLowerCase().includes(x.toLowerCase())||i.course.toLowerCase().includes(x.toLowerCase())||i.mobile_number.includes(x))),I(s)},H=async(s,i)=>{try{const{error:p}=await w.from("applications").update({status:i}).eq("id",s);if(p)throw p;r({title:"Status Updated",description:`Application status changed to ${i}`}),j()}catch{r({title:"Error",description:"Failed to update status",variant:"destructive"})}},y=s=>{const i={pending:"bg-yellow-100 text-yellow-800",under_review:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return e.jsx(W,{className:i[s]||i.pending,children:s.replace("_"," ").toUpperCase()})},G=s=>{N(s),v(!0)};return L?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(U,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background py-12",children:[e.jsx(q,{title:"Admin Applications",robots:"noindex, nofollow",canonical:"/admin/applications"}),e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-2",children:"Applications Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and review student applications"})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search by name, email, course...",value:x,onChange:s=>k(s.target.value),className:"pl-10"})]}),e.jsxs(_,{value:u,onValueChange:F,children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Filter by status"})}),e.jsxs(A,{children:[e.jsx(c,{value:"all",children:"All Statuses"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"under_review",children:"Under Review"}),e.jsx(c,{value:"accepted",children:"Accepted"}),e.jsx(c,{value:"rejected",children:"Rejected"})]})]}),e.jsx(T,{onClick:j,variant:"outline",children:"Refresh"})]})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Applications"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.filter(s=>s.status==="pending").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(s=>s.status==="under_review").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Under Review"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(s=>s.status==="accepted").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Accepted"})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:e.jsxs(R,{children:[e.jsx(M,{children:e.jsxs(h,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Email"}),e.jsx(o,{children:"Phone"}),e.jsx(o,{children:"Course"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Date"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(E,{children:f.length===0?e.jsx(h,{children:e.jsx(n,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No applications found"})}):f.map(s=>e.jsxs(h,{children:[e.jsx(n,{className:"font-medium",children:s.full_name}),e.jsx(n,{className:"text-sm",children:s.email_address}),e.jsx(n,{className:"text-sm",children:s.mobile_number}),e.jsx(n,{className:"text-sm",children:s.course}),e.jsx(n,{children:s.student_type}),e.jsx(n,{children:y(s.status)}),e.jsx(n,{className:"text-sm",children:g(new Date(s.created_at),"MMM dd, yyyy")}),e.jsx(n,{children:e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>G(s),children:e.jsx(X,{className:"w-4 h-4"})})})]},s.id))})]})})]}),t&&e.jsx(V,{open:B,onOpenChange:v,children:e.jsxs(Q,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(J,{children:[e.jsx(K,{children:"Application Details"}),e.jsx($,{children:"Review and manage this application"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Current Status"}),y(t.status)]}),e.jsxs(_,{value:t.status,onValueChange:s=>{H(t.id,s),N({...t,status:s})},children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(S,{})}),e.jsxs(A,{children:[e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"under_review",children:"Under Review"}),e.jsx(c,{value:"accepted",children:"Accepted"}),e.jsx(c,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Full Name:"}),e.jsx("p",{className:"font-medium",children:t.full_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Number:"}),e.jsx("p",{className:"font-medium",children:t.id_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date of Birth:"}),e.jsx("p",{className:"font-medium",children:g(new Date(t.date_of_birth),"MMMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"}),e.jsx("p",{className:"font-medium",children:t.gender})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"}),e.jsx("p",{className:"font-medium",children:t.email_address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),e.jsx("p",{className:"font-medium",children:t.mobile_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"County:"}),e.jsx("p",{className:"font-medium",children:t.county})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Course Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Course:"}),e.jsx("p",{className:"font-medium",children:t.course})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Student Type:"}),e.jsx("p",{className:"font-medium",children:t.student_type})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Guardian Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guardian Name:"}),e.jsx("p",{className:"font-medium",children:t.guardian_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guardian Contact:"}),e.jsx("p",{className:"font-medium",children:t.guardian_contact})]})]})]}),(t.allergies||t.pre_existing_conditions)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Medical Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.allergies&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Allergies:"}),e.jsx("p",{className:"font-medium",children:t.allergies})]}),t.pre_existing_conditions&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pre-existing Conditions:"}),e.jsx("p",{className:"font-medium",children:t.pre_existing_conditions})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Application ID: ",t.id]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Submitted: ",g(new Date(t.created_at),"MMMM dd, yyyy 'at' hh:mm a")]})]})]})]})})]})};export{re as default};
